<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: head('Araç Düzenle')">
    <meta charset="UTF-8">
    <title>Araç Düzenle</title>
</head>
<body>
    <nav th:replace="fragments/layout :: navbar('vehicles')"></nav>

    <div class="container my-4">
        <div th:replace="fragments/layout :: alerts"></div>
        
        <div class="d-flex align-items-center mb-4">
            <a th:href="@{/vehicles/{id}(id=${vehicle.id})}" class="btn btn-outline-secondary btn-sm">
                <i class="bi bi-arrow-left"></i> Araç Detaylarına Dön
            </a>
            <h1 class="ms-3 mb-0" th:text="'Araç Düzenle: ' + ${vehicle.brand} + ' ' + ${vehicle.model}">Araç Düzenle: Toyota Corolla</h1>
        </div>
        
        <div class="card">
            <div class="card-body">
                <form th:action="@{/vehicles/{id}/edit(id=${vehicle.id})}" th:object="${vehicle}" method="post" class="row g-3">
                    <input type="hidden" th:field="*{id}">
                    
                    <!-- Temel Araç Bilgileri -->
                    <div class="col-md-4">
                        <label for="brand" class="form-label">Marka</label>
                        <input type="text" class="form-control" id="brand" th:field="*{brand}" required>
                        <div class="text-danger" th:if="${#fields.hasErrors('brand')}" th:errors="*{brand}"></div>
                    </div>
                    
                    <div class="col-md-4">
                        <label for="model" class="form-label">Model</label>
                        <input type="text" class="form-control" id="model" th:field="*{model}" required>
                        <div class="text-danger" th:if="${#fields.hasErrors('model')}" th:errors="*{model}"></div>
                    </div>
                    
                    <div class="col-md-4">
                        <label for="year" class="form-label">Yıl</label>
                        <input type="number" class="form-control" id="year" th:field="*{year}" min="1900" th:max="${#calendars.format(#calendars.createNow(), 'yyyy')}" required>
                        <div class="text-danger" th:if="${#fields.hasErrors('year')}" th:errors="*{year}"></div>
                    </div>
                    
                    <div class="col-md-6">
                        <label for="packageType" class="form-label">Paket</label>
                        <input type="text" class="form-control" id="packageType" th:field="*{packageType}" required>
                        <div class="text-danger" th:if="${#fields.hasErrors('packageType')}" th:errors="*{packageType}"></div>
                    </div>
                    
                    <div class="col-md-6">
                        <label for="vin" class="form-label">VIN (Şasi No)</label>
                        <input type="text" class="form-control" id="vin" th:field="*{vin}" required>
                        <div class="text-danger" th:if="${#fields.hasErrors('vin')}" th:errors="*{vin}"></div>
                    </div>
                    
                    <!-- Fiyat ve Renk Bilgileri -->
                    <div class="col-md-6">
                        <label for="price" class="form-label">Fiyat (TL)</label>
                        <input type="number" class="form-control" id="price" th:field="*{price}" min="0" step="0.01" required>
                        <div class="text-danger" th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></div>
                    </div>
                    
                    <div class="col-md-6">
                        <label for="color" class="form-label">Renk</label>
                        <input type="text" class="form-control" id="color" th:field="*{color}">
                        <div class="text-danger" th:if="${#fields.hasErrors('color')}" th:errors="*{color}"></div>
                    </div>
                    
                    <!-- Ek Bilgiler -->
                    <div class="col-md-6">
                        <label for="mileage" class="form-label">Kilometre</label>
                        <input type="number" class="form-control" id="mileage" th:field="*{mileage}" min="0">
                        <div class="text-danger" th:if="${#fields.hasErrors('mileage')}" th:errors="*{mileage}"></div>
                    </div>
                    
                    <div class="col-md-6">
                        <label for="status" class="form-label">Durum</label>
                        <select class="form-select" id="status" th:field="*{status}" required>
                            <option th:each="statusOpt : ${statuses}" th:value="${statusOpt}" th:text="${statusOpt}"
                                    th:selected="${statusOpt == vehicle.status}"></option>
                        </select>
                        <div class="text-danger" th:if="${#fields.hasErrors('status')}" th:errors="*{status}"></div>
                    </div>
                    
                    <div class="col-md-12 mt-3">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="isAvailableForTestDrive" th:field="*{availableForTestDrive}">
                            <label class="form-check-label" for="isAvailableForTestDrive">Test Sürüşü İçin Uygun</label>
                        </div>
                    </div>
                    
                    <div class="col-md-12">
                        <label for="description" class="form-label">Açıklama</label>
                        <textarea class="form-control" id="description" th:field="*{description}" rows="3"></textarea>
                        <div class="text-danger" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
                    </div>
                    
                    <div class="col-12 text-end">
                        <a th:href="@{/vehicles/{id}(id=${vehicle.id})}" class="btn btn-secondary me-2">İptal</a>
                        <button type="submit" class="btn btn-primary">Güncelle</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <footer th:replace="fragments/layout :: footer"></footer>
</body>
</html> 